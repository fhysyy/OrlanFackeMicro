{
  "codeGeneratorRequest": {
    "description": "学生管理系统代码生成器入参请求",
    "version": "1.0.0",
    "requestType": "StudentManagement",
    "entities": [
      {
        "entityName": "Student",
        "entityDescription": "学生信息实体",
        "namespace": "FakeMicro.Entities",
        "tableName": "students",
        "primaryKeyProperty": "Id",
        "primaryKeyType": "long",
        "isAuditable": true,
        "isSoftDeletable": true,
        "properties": [
          {
            "name": "Id",
            "type": "long",
            "description": "学生唯一标识",
            "isRequired": true,
            "isPrimaryKey": true,
            "isIdentity": true,
            "columnName": "id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": true,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": true
          },
          {
            "name": "StudentNumber",
            "type": "string",
            "description": "学号",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "student_number",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 20,
            "minLength": 8,
            "isAutoIncrement": false
          },
          {
            "name": "FirstName",
            "type": "string",
            "description": "名",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "first_name",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 50,
            "minLength": 1,
            "isAutoIncrement": false
          },
          {
            "name": "LastName",
            "type": "string",
            "description": "姓",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "last_name",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 50,
            "minLength": 1,
            "isAutoIncrement": false
          },
          {
            "name": "Email",
            "type": "string",
            "description": "邮箱地址",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "email",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 100,
            "minLength": 5,
            "isAutoIncrement": false
          },
          {
            "name": "Phone",
            "type": "string",
            "description": "联系电话",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "phone",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 20,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Gender",
            "type": "int",
            "description": "性别(0:未知,1:男,2:女)",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "gender",
            "defaultValue": "0",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "DateOfBirth",
            "type": "DateTime",
            "description": "出生日期",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "date_of_birth",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "ClassId",
            "type": "long",
            "description": "班级ID",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "class_id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "EnrollmentDate",
            "type": "DateTime",
            "description": "入学日期",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "enrollment_date",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Status",
            "type": "int",
            "description": "学生状态(1:在读,2:休学,3:毕业,4:退学)",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "status",
            "defaultValue": "1",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "GPA",
            "type": "decimal",
            "description": "平均绩点",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "gpa",
            "defaultValue": "0.0",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Address",
            "type": "string",
            "description": "家庭住址",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "address",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 200,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "EmergencyContact",
            "type": "string",
            "description": "紧急联系人",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "emergency_contact",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 100,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "EmergencyPhone",
            "type": "string",
            "description": "紧急联系电话",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "emergency_phone",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 20,
            "minLength": null,
            "isAutoIncrement": false
          }
        ]
      },
      {
        "entityName": "Class",
        "entityDescription": "班级信息实体",
        "namespace": "FakeMicro.Entities",
        "tableName": "classes",
        "primaryKeyProperty": "Id",
        "primaryKeyType": "long",
        "isAuditable": true,
        "isSoftDeletable": true,
        "properties": [
          {
            "name": "Id",
            "type": "long",
            "description": "班级唯一标识",
            "isRequired": true,
            "isPrimaryKey": true,
            "isIdentity": true,
            "columnName": "id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": true,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": true
          },
          {
            "name": "ClassName",
            "type": "string",
            "description": "班级名称",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "class_name",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 100,
            "minLength": 1,
            "isAutoIncrement": false
          },
          {
            "name": "ClassCode",
            "type": "string",
            "description": "班级编号",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "class_code",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 20,
            "minLength": 3,
            "isAutoIncrement": false
          },
          {
            "name": "Grade",
            "type": "int",
            "description": "年级",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "grade",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Major",
            "type": "string",
            "description": "专业",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "major",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 100,
            "minLength": 1,
            "isAutoIncrement": false
          },
          {
            "name": "TeacherId",
            "type": "long",
            "description": "班主任ID",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "teacher_id",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "MaxStudents",
            "type": "int",
            "description": "最大学生数",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "max_students",
            "defaultValue": "50",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "CurrentStudents",
            "type": "int",
            "description": "当前学生数",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "current_students",
            "defaultValue": "0",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Status",
            "type": "int",
            "description": "班级状态(1:正常,2:停课,3:毕业)",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "status",
            "defaultValue": "1",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Description",
            "type": "string",
            "description": "班级描述",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "description",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 500,
            "minLength": null,
            "isAutoIncrement": false
          }
        ]
      },
      {
        "entityName": "Course",
        "entityDescription": "课程信息实体",
        "namespace": "FakeMicro.Entities",
        "tableName": "courses",
        "primaryKeyProperty": "Id",
        "primaryKeyType": "long",
        "isAuditable": true,
        "isSoftDeletable": true,
        "properties": [
          {
            "name": "Id",
            "type": "long",
            "description": "课程唯一标识",
            "isRequired": true,
            "isPrimaryKey": true,
            "isIdentity": true,
            "columnName": "id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": true,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": true
          },
          {
            "name": "CourseCode",
            "type": "string",
            "description": "课程编号",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "course_code",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 20,
            "minLength": 3,
            "isAutoIncrement": false
          },
          {
            "name": "CourseName",
            "type": "string",
            "description": "课程名称",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "course_name",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": 100,
            "minLength": 1,
            "isAutoIncrement": false
          },
          {
            "name": "Credits",
            "type": "decimal",
            "description": "学分",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "credits",
            "defaultValue": "1.0",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Hours",
            "type": "int",
            "description": "课时",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "hours",
            "defaultValue": "32",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "TeacherId",
            "type": "long",
            "description": "任课教师ID",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "teacher_id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Category",
            "type": "string",
            "description": "课程类别",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "category",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 50,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Status",
            "type": "int",
            "description": "课程状态(1:正常,2:停课,3:已结束)",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "status",
            "defaultValue": "1",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Description",
            "type": "string",
            "description": "课程描述",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "description",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 1000,
            "minLength": null,
            "isAutoIncrement": false
          }
        ]
      },
      {
        "entityName": "Enrollment",
        "entityDescription": "学生选课记录实体",
        "namespace": "FakeMicro.Entities",
        "tableName": "enrollments",
        "primaryKeyProperty": "Id",
        "primaryKeyType": "long",
        "isAuditable": true,
        "isSoftDeletable": false,
        "properties": [
          {
            "name": "Id",
            "type": "long",
            "description": "选课记录唯一标识",
            "isRequired": true,
            "isPrimaryKey": true,
            "isIdentity": true,
            "columnName": "id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": true,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": true
          },
          {
            "name": "StudentId",
            "type": "long",
            "description": "学生ID",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "student_id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "CourseId",
            "type": "long",
            "description": "课程ID",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "course_id",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "EnrollmentDate",
            "type": "DateTime",
            "description": "选课日期",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "enrollment_date",
            "defaultValue": "",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Status",
            "type": "int",
            "description": "选课状态(1:已选课,2:已退课,3:已完成)",
            "isRequired": true,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "status",
            "defaultValue": "1",
            "isNullable": false,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Score",
            "type": "decimal",
            "description": "成绩",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "score",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": null,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Grade",
            "type": "string",
            "description": "等级(A,B,C,D,F)",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "grade",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 2,
            "minLength": null,
            "isAutoIncrement": false
          },
          {
            "name": "Remarks",
            "type": "string",
            "description": "备注",
            "isRequired": false,
            "isPrimaryKey": false,
            "isIdentity": false,
            "columnName": "remarks",
            "defaultValue": "",
            "isNullable": true,
            "isReadOnly": false,
            "maxLength": 200,
            "minLength": null,
            "isAutoIncrement": false
          }
        ]
      }
    ],
    "generatorOptions": {
      "outputPath": "f:/ProjectCode/OrlanFackeMicro/src",
      "templatesToGenerate": [
        "Entity",
        "Interface",
        "Grain",
        "Dto",
        "Controller",
        "Request",
        "Result"
      ],
      "overwriteExisting": true,
      "author": "StudentManagementSystem",
      "company": "FakeMicro",
      "addFileHeader": true,
      "namespacePrefix": "FakeMicro",
      "generateAsyncMethods": true,
      "generateCacheSupport": true,
      "generateTransactionSupport": true,
      "generateAuthorization": true,
      "generateLogging": true,
      "generateUnitTests": false,
      "generateXmlDocumentation": true
    },
    "customTemplates": {
      "studentRepository": {
        "templateName": "StudentRepository",
        "description": "学生仓储接口",
        "outputPath": "FakeMicro.Interfaces/Repositories",
        "customMethods": [
          {
            "methodName": "GetByStudentNumberAsync",
            "returnType": "Task<Student?>",
            "parameters": [
              {
                "name": "studentNumber",
                "type": "string"
              }
            ],
            "description": "根据学号获取学生信息"
          },
          {
            "methodName": "GetByClassIdAsync",
            "returnType": "Task<List<Student>>",
            "parameters": [
              {
                "name": "classId",
                "type": "long"
              }
            ],
            "description": "根据班级ID获取学生列表"
          },
          {
            "methodName": "UpdateGPAAsync",
            "returnType": "Task<bool>",
            "parameters": [
              {
                "name": "studentId",
                "type": "long"
              },
              {
                "name": "gpa",
                "type": "decimal"
              }
            ],
            "description": "更新学生GPA"
          }
        ]
      },
      "classRepository": {
        "templateName": "ClassRepository",
        "description": "班级仓储接口",
        "outputPath": "FakeMicro.Interfaces/Repositories",
        "customMethods": [
          {
            "methodName": "GetStudentsByClassAsync",
            "returnType": "Task<List<Student>>",
            "parameters": [
              {
                "name": "classId",
                "type": "long"
              }
            ],
            "description": "获取班级学生列表"
          },
          {
            "methodName": "UpdateStudentCountAsync",
            "returnType": "Task<bool>",
            "parameters": [
              {
                "name": "classId",
                "type": "long"
              },
              {
                "name": "count",
                "type": "int"
              }
            ],
            "description": "更新班级学生数量"
          }
        ]
      }
    },
    "businessRules": {
      "student": {
        "validationRules": [
          {
            "rule": "StudentNumberMustBeUnique",
            "description": "学号必须唯一",
            "errorMessage": "学号已存在"
          },
          {
            "rule": "EmailMustBeValid",
            "description": "邮箱格式必须正确",
            "errorMessage": "邮箱格式不正确"
          },
          {
            "rule": "AgeMustBeValid",
            "description": "学生年龄必须在合理范围内",
            "errorMessage": "学生年龄不符合要求"
          },
          {
            "rule": "GPARangeValidation",
            "description": "GPA必须在0.0-4.0之间",
            "errorMessage": "GPA数值超出范围"
          }
        ],
        "businessLogic": [
          {
            "rule": "CannotDeleteActiveStudent",
            "description": "不能删除在读学生",
            "errorMessage": "在读学生不能删除"
          },
          {
            "rule": "ClassCapacityLimit",
            "description": "班级人数不能超过最大容量",
            "errorMessage": "班级人数已满"
          }
        ]
      },
      "enrollment": {
        "validationRules": [
          {
            "rule": "CannotDuplicateEnrollment",
            "description": "不能重复选课",
            "errorMessage": "已经选择过该课程"
          },
          {
            "rule": "PrerequisiteCheck",
            "description": "必须满足先修课程要求",
            "errorMessage": "不满足选课条件"
          }
        ],
        "businessLogic": [
          {
            "rule": "CreditLimitCheck",
            "description": "选课总学分不能超过限制",
            "errorMessage": "选课学分超限"
          },
          {
            "rule": "TimeConflictCheck",
            "description": "选课时间不能冲突",
            "errorMessage": "课程时间冲突"
          }
        ]
      }
    },
    "relationships": [
      {
        "fromEntity": "Student",
        "toEntity": "Class",
        "relationshipType": "ManyToOne",
        "foreignKeyProperty": "ClassId",
        "description": "学生属于一个班级"
      },
      {
        "fromEntity": "Student",
        "toEntity": "Enrollment",
        "relationshipType": "OneToMany",
        "description": "学生可以有多条选课记录"
      },
      {
        "fromEntity": "Class",
        "toEntity": "Student",
        "relationshipType": "OneToMany",
        "description": "班级包含多个学生"
      },
      {
        "fromEntity": "Course",
        "toEntity": "Enrollment",
        "relationshipType": "OneToMany",
        "description": "课程可以被多个学生选择"
      },
      {
        "fromEntity": "Enrollment",
        "toEntity": "Student",
        "relationshipType": "ManyToOne",
        "foreignKeyProperty": "StudentId",
        "description": "选课记录属于一个学生"
      },
      {
        "fromEntity": "Enrollment",
        "toEntity": "Course",
        "relationshipType": "ManyToOne",
        "foreignKeyProperty": "CourseId",
        "description": "选课记录对应一门课程"
      }
    ],
    "usageNotes": [
      "所有实体都支持审计功能（创建时间、更新时间、创建者、更新者）",
      "学生和班级实体支持软删除功能",
      "选课记录实体不支持软删除，保留历史数据",
      "所有生成的代码都包含完整的XML文档注释",
      "支持异步操作和事务处理",
      "包含权限验证和日志记录功能",
      "生成的API控制器支持分页、排序和筛选功能"
    ]
  }
}