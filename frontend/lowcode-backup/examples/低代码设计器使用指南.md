# 低代码设计器使用指南

## 1. 概述

低代码设计器是一个可视化页面构建工具，允许用户通过拖拽组件、配置属性和事件的方式快速创建应用页面，无需编写大量代码。本文档将详细介绍如何使用该设计器及其最佳实践。

## 2. 核心功能

### 2.1 设计器界面布局

设计器由四个主要区域组成：

- **顶部工具栏**：包含保存、预览、导出、导入等功能
- **左侧组件面板**：展示可使用的组件列表，支持按类别查找和拖拽
- **中间设计区域**：页面预览和编辑区域，支持不同设备尺寸切换
- **右侧属性面板**：配置选中组件的属性、事件和高级设置

### 2.2 主要操作功能

- **组件拖拽**：从左侧面板拖拽组件到设计区域
- **属性配置**：在右侧面板设置组件的各种属性
- **事件绑定**：为组件添加交互事件，支持自定义代码
- **页面设置**：配置页面元数据、路由信息等
- **保存/导出/导入**：保存页面配置，导出为JSON文件或导入现有配置

## 3. 快速入门

### 3.1 创建新页面

1. 打开低代码设计器
2. 点击"新建页面"按钮
3. 在页面设置对话框中填写页面ID、名称、路由路径等信息
4. 点击"确认"创建新页面

### 3.2 添加组件

1. 从左侧组件面板选择所需组件
2. 拖拽组件到中间设计区域的目标位置
3. 配置组件属性和事件

### 3.3 配置数据和交互

1. 在页面状态中定义数据变量
2. 在方法中定义业务逻辑函数
3. 为组件绑定事件处理器
4. 使用表达式语法（`{{ expression }}`）绑定数据

## 4. 使用示例说明

已创建的`example-page.json`示例展示了以下核心功能：

- **嵌套布局**：使用container、row、col组件实现响应式布局
- **数据绑定**：计数器功能展示了数据状态与UI的绑定
- **事件处理**：按钮点击事件触发方法调用
- **表单组件**：完整的用户信息表单示例
- **页面状态管理**：定义了counter和userInfo两个状态变量
- **生命周期钩子**：实现了created和mounted生命周期方法

## 5. 组件注册与使用

### 5.1 组件注册机制

组件通过`componentRegistry`进行集中管理：

```javascript
// 注册单个组件
componentRegistry.registerComponent('MyComponent', MyComponent, {
  category: '自定义组件',
  label: '我的组件'
});

// 批量注册组件
componentRegistry.registerComponents([
  { name: 'Component1', component: Component1, meta: { ... } },
  { name: 'Component2', component: Component2, meta: { ... } }
]);
```

### 5.2 大小写不敏感组件查找

设计器支持大小写不敏感的组件查找，例如`Container`和`container`会被识别为同一组件。

## 6. 最佳实践

### 6.1 组件设计原则

- **组件化思想**：将UI拆分为可复用的小组件
- **单一职责**：每个组件只负责一个功能
- **属性设计**：提供合理的默认值，减少配置复杂度
- **事件设计**：提供明确的事件接口，便于交互逻辑绑定

### 6.2 页面结构优化

- **使用container组件**：作为页面或区块的根容器
- **合理使用布局组件**：row、col组件实现响应式布局
- **嵌套层级控制**：避免组件嵌套过深，影响性能

### 6.3 数据管理最佳实践

- **状态定义**：在页面state中集中管理数据
- **方法封装**：将业务逻辑封装为方法，避免直接在事件中编写复杂代码
- **表达式使用**：使用`{{ expression }}`语法进行数据绑定
- **持久化策略**：对于需要持久化的数据，设置`persist: true`

### 6.4 性能优化

- **避免不必要的渲染**：合理使用条件渲染
- **列表优化**：使用vFor渲染列表时，确保有唯一的key
- **组件复用**：设计可复用的组件，减少重复开发
- **懒加载**：对于大型组件或页面，考虑使用懒加载

## 7. 高级功能

### 7.1 表达式语法

设计器支持在属性中使用表达式语法：

```
// 简单表达式
{{ counter }}

// 复合表达式
{{ counter * 100 }}

// 对象属性访问
{{ userInfo?.name || '未登录' }}
```

### 7.2 事件处理器

事件处理器支持JavaScript代码执行：

```javascript
// 调用页面方法
this.incrementCounter();

// 访问页面状态
console.log(this.counter);

// 调用外部库
ElMessage.success('操作成功');
```

### 7.3 页面生命周期

支持配置页面的生命周期钩子：

- **created**：页面创建时执行
- **mounted**：页面挂载后执行
- **updated**：页面更新时执行
- **beforeUnmount**：页面卸载前执行

## 8. 常见问题与解决方案

### 8.1 组件无法正常显示

- 检查组件名称是否正确（大小写不敏感）
- 确认组件已正确注册
- 检查组件的必需属性是否已配置

### 8.2 数据绑定不生效

- 确保表达式语法正确：`{{ expression }}`
- 检查变量是否在页面state中定义
- 确认属性是否支持动态绑定

### 8.3 事件处理器执行错误

- 检查JavaScript代码语法
- 确保使用`this`访问页面状态和方法
- 查看浏览器控制台错误信息

## 9. 导入导出说明

### 9.1 导出页面

1. 完成页面设计后，点击顶部工具栏的"导出"按钮
2. 选择导出格式（JSON）
3. 保存导出文件

### 9.2 导入页面

1. 点击顶部工具栏的"导入"按钮
2. 选择之前导出的JSON文件
3. 确认导入覆盖现有页面或创建新页面

## 10. 开发与扩展

### 10.1 添加自定义组件

1. 开发Vue组件
2. 使用componentRegistry注册组件
3. 在组件元数据中定义组件的属性、事件等信息

### 10.2 扩展设计器功能

- 开发自定义属性编辑器
- 添加自定义代码片段
- 扩展导出格式

---

通过本指南，您应该能够熟练使用低代码设计器创建和管理页面。请参考示例配置文件`example-page.json`以了解实际使用场景。